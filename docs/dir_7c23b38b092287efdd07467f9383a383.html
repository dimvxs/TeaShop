<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Shop ProjectMy Project: frontend/node_modules/zod-validation-error Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Shop ProjectMy Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dir_7c23b38b092287efdd07467f9383a383.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">zod-validation-error Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Directory dependency graph for zod-validation-error:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="dir_7c23b38b092287efdd07467f9383a383_dep.svg" width="184" height="106"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<h1 class="doxsection"><a class="anchor" id="autotoc_md3147"></a>
zod-validation-error</h1>
<p>Wrap zod validation errors in user-friendly readable messages.</p>
<p><a href="https://github.com/causaly/zod-validation-error/actions/workflows/ci.yml"><img src="https://github.com/causaly/zod-validation-error/actions/workflows/ci.yml/badge.svg" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/zod-validation-error"><img src="https://img.shields.io/npm/v/zod-validation-error.svg?color=0c0" alt="npm version" style="pointer-events: none;" class="inline"/></a></p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3148"></a>
Features</h3>
<ul>
<li>User-friendly readable error messages with extensive configuration options;</li>
<li>Preserves original error details accessible via <span class="tt">error.details</span>;</li>
<li>Provides a custom error map for better user-friendly messages;</li>
<li>Supports both Zod v3 and v4.</li>
</ul>
<p><b><em>Note:</em></b> This version of <span class="tt">zod-validation-error</span> works with zod v4. If you are looking for zod v3 support, please refer to the <a class="el" href="md_frontend_2node__modules_2zod-validation-error_2_r_e_a_d_m_e_8v3.html">v3 documentation</a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md3149"></a>
Installation</h1>
<div class="fragment"><div class="line">npm install zod-validation-error</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md3150"></a>
Requirements</h3>
<ul>
<li>Node.js v.18+</li>
<li>TypeScript v.4.5+</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md3151"></a>
Quick start</h1>
<div class="fragment"><div class="line">import { z as zod } from &#39;zod&#39;;</div>
<div class="line">import { fromError, createErrorMap } from &#39;zod-validation-error&#39;;</div>
<div class="line"> </div>
<div class="line">// configure zod to use zod-validation-error&#39;s error map</div>
<div class="line">// this is optional, you may also use your own custom error map or zod&#39;s native error map</div>
<div class="line">// we recommend using zod-validation-error&#39;s error map for better user-friendly messages</div>
<div class="line">// see https://zod.dev/error-customization for further details</div>
<div class="line">zod.config({</div>
<div class="line">  customError: createErrorMap(),</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// create zod schema</div>
<div class="line">const zodSchema = zod.object({</div>
<div class="line">  id: zod.int().positive(),</div>
<div class="line">  email: zod.email(),</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// parse some invalid value</div>
<div class="line">try {</div>
<div class="line">  zodSchema.parse({</div>
<div class="line">    id: 1,</div>
<div class="line">    email: &#39;coyote@acme&#39;, // note: invalid email</div>
<div class="line">  });</div>
<div class="line">} catch (err) {</div>
<div class="line">  const validationError = fromError(err);</div>
<div class="line">  // the error is now readable by the user</div>
<div class="line">  // you may print it to console</div>
<div class="line">  console.log(validationError.toString());</div>
<div class="line">  // or return it as an actual error</div>
<div class="line">  return validationError;</div>
<div class="line">}</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md3152"></a>
Motivation</h1>
<p>Zod errors are difficult to consume for the end-user. This library wraps Zod validation errors in user-friendly readable messages that can be exposed to the outer world, while maintaining the original errors in an array for <em>dev</em> use.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md3153"></a>
Example</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3154"></a>
Input (from Zod)</h3>
<div class="fragment"><div class="line">[</div>
<div class="line">  {</div>
<div class="line">    &quot;origin&quot;: &quot;number&quot;,</div>
<div class="line">    &quot;code&quot;: &quot;too_small&quot;,</div>
<div class="line">    &quot;minimum&quot;: 0,</div>
<div class="line">    &quot;inclusive&quot;: false,</div>
<div class="line">    &quot;path&quot;: [&quot;id&quot;],</div>
<div class="line">    &quot;message&quot;: &quot;Number must be greater than 0 at \&quot;id\&quot;&quot;</div>
<div class="line">  },</div>
<div class="line">  {</div>
<div class="line">    &quot;origin&quot;: &quot;string&quot;,</div>
<div class="line">    &quot;code&quot;: &quot;invalid_format&quot;,</div>
<div class="line">    &quot;format&quot;: &quot;email&quot;,</div>
<div class="line">    &quot;pattern&quot;: &quot;/^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_&#39;+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/&quot;,</div>
<div class="line">    &quot;path&quot;: [&quot;email&quot;],</div>
<div class="line">    &quot;message&quot;: &quot;Invalid email at \&quot;email\&quot;&quot;</div>
<div class="line">  }</div>
<div class="line">]</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md3155"></a>
Output</h3>
<div class="fragment"><div class="line">Validation error: Number must be greater than 0 at &quot;id&quot;; Invalid email at &quot;email&quot;</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md3156"></a>
API</h1>
<ul>
<li>ValidationError(message[, options])</li>
<li>createErrorMap(options)</li>
<li>createMessageBuilder(options)</li>
<li>isValidationError(error)</li>
<li>isValidationErrorLike(error)</li>
<li>isZodErrorLike(error)</li>
<li>fromError(error[, options])</li>
<li>fromZodIssue(zodIssue[, options])</li>
<li>fromZodError(zodError[, options])</li>
<li>toValidationError([options]) =&gt; (error) =&gt; ValidationError</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md3157"></a>
ValidationError</h2>
<p>Main <span class="tt">ValidationError</span> class, extending JavaScript's native <span class="tt">Error</span>.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3158"></a>
Arguments</h3>
<ul>
<li><span class="tt">message</span> - <em>string</em>; error message (required)</li>
<li><span class="tt">options</span> - <em>ErrorOptions</em>; error options as per <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/Error#options">JavaScript definition</a> (optional)<ul>
<li><span class="tt">options.cause</span> - <em>any</em>; can be used to hold the original zod error (optional)</li>
</ul>
</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3159"></a>
Example 1: construct new ValidationError with <span class="tt">message</span></h3>
<div class="fragment"><div class="line">import { ValidationError } from &#39;zod-validation-error&#39;;</div>
<div class="line"> </div>
<div class="line">const error = new ValidationError(&#39;foobar&#39;);</div>
<div class="line">console.log(error instanceof Error); // prints true</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md3160"></a>
Example 2: construct new ValidationError with <span class="tt">message</span> and <span class="tt">options.cause</span></h3>
<div class="fragment"><div class="line">import { z as zod } from &#39;zod&#39;;</div>
<div class="line">import { ValidationError } from &#39;zod-validation-error&#39;;</div>
<div class="line"> </div>
<div class="line">const error = new ValidationError(&#39;foobar&#39;, {</div>
<div class="line">  cause: new zod.ZodError([</div>
<div class="line">    {</div>
<div class="line">      origin: &#39;number&#39;,</div>
<div class="line">      code: &#39;too_small&#39;,</div>
<div class="line">      minimum: 0,</div>
<div class="line">      inclusive: false,</div>
<div class="line">      path: [&#39;id&#39;],</div>
<div class="line">      message: &#39;Number must be greater than 0 at &quot;id&quot;&#39;,</div>
<div class="line">      input: -1,</div>
<div class="line">    },</div>
<div class="line">  ]),</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">console.log(error.details); // prints issues from zod error</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md3161"></a>
createErrorMap</h2>
<p>Creates zod-validation-error's <span class="tt">errorMap</span>, which is used to format issues into user-friendly error messages.</p>
<p>We think that zod's native error map is not user-friendly enough, so we provide our own implementation that formats issues into human-readable messages.</p>
<p>Note: zod-validation-error's <span class="tt">errorMap</span> is an errorMap like all others and thus can also be used directly with <span class="tt">zod</span> (see <a href="https://zod.dev/error-customization">https://zod.dev/error-customization</a> for further details), e.g.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3162"></a>
Arguments</h3>
<ul>
<li><span class="tt">options</span> - <em>Object</em>; formatting options (optional)</li>
</ul>
<h4 class="doxsection"><a class="anchor" id="autotoc_md3163"></a>
createErrorMap Options</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name  </th><th class="markdownTableHeadCenter">Type  </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">displayInvalidFormatDetails</span>  </td><td class="markdownTableBodyCenter"><span class="tt">boolean</span>  </td><td class="markdownTableBodyNone">Indicates whether to display invalid format details (e.g. regexp pattern) in the error message (optional, defaults to <span class="tt">false</span>)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">maxAllowedValuesToDisplay</span>  </td><td class="markdownTableBodyCenter"><span class="tt">number</span>  </td><td class="markdownTableBodyNone">Max number of allowed values to display (optional, defaults to <span class="tt">10</span>). Allowed values beyond this limit will be hidden.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">allowedValuesSeparator</span>  </td><td class="markdownTableBodyCenter"><span class="tt">string</span>  </td><td class="markdownTableBodyNone">Used to concatenate allowed values in the message (optional, defaults to <span class="tt">", "</span>)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">allowedValuesLastSeparator</span>  </td><td class="markdownTableBodyCenter"><span class="tt">string \| undefined</span>  </td><td class="markdownTableBodyNone">Used to concatenate last allowed value in the message (optional, defaults to <span class="tt">" or "</span>). Set to <span class="tt">undefined</span> to disable.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">wrapAllowedValuesInQuote</span>  </td><td class="markdownTableBodyCenter"><span class="tt">boolean</span>  </td><td class="markdownTableBodyNone">Indicates whether to wrap allowed values in quotes (optional, defaults to <span class="tt">true</span>). Note that this only applies to string values.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">maxUnrecognizedKeysToDisplay</span>  </td><td class="markdownTableBodyCenter"><span class="tt">number</span>  </td><td class="markdownTableBodyNone">Max number of unrecognized keys to display in the error message (optional, defaults to <span class="tt">5</span>)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">unrecognizedKeysSeparator</span>  </td><td class="markdownTableBodyCenter"><span class="tt">string</span>  </td><td class="markdownTableBodyNone">Used to concatenate unrecognized keys in the message (optional, defaults to <span class="tt">", "</span>)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">unrecognizedKeysLastSeparator</span>  </td><td class="markdownTableBodyCenter"><span class="tt">string \| undefined</span>  </td><td class="markdownTableBodyNone">Used to concatenate the last unrecognized key in message (optional, defaults to <span class="tt">" and "</span>). Set to <span class="tt">undefined</span> to disable.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">wrapUnrecognizedKeysInQuote</span>  </td><td class="markdownTableBodyCenter"><span class="tt">boolean</span>  </td><td class="markdownTableBodyNone">Indicates whether to wrap unrecognized keys in quotes (optional, defaults to <span class="tt">true</span>). Note that this only applies to string keys.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">dateLocalization</span>  </td><td class="markdownTableBodyCenter"><span class="tt">boolean \| Intl.LocalesArgument</span>  </td><td class="markdownTableBodyNone">Indicates whether to localize date values (optional, defaults to <span class="tt">true</span>). If set to <span class="tt">true</span>, it will use the default locale of the environment. You can also pass <span class="tt">Intl.LocalesArgument</span> to specify a custom locale.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">numberLocalization</span>  </td><td class="markdownTableBodyCenter"><span class="tt">boolean \| Intl.LocalesArgument</span>  </td><td class="markdownTableBodyNone">Indicates whether to localize numeric values (optional, defaults to <span class="tt">true</span>). If set to <span class="tt">true</span>, it will use the default locale of the environment. You can also pass <span class="tt">Intl.LocalesArgument</span> to specify a custom locale.  </td></tr>
</table>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3164"></a>
Example</h3>
<div class="fragment"><div class="line">import { z as zod } from &#39;zod&#39;;</div>
<div class="line">import { createErrorMap } from &#39;zod-validation-error&#39;;</div>
<div class="line"> </div>
<div class="line">zod.config({</div>
<div class="line">  customError: createErrorMap({</div>
<div class="line">    // default values are used when not specified</div>
<div class="line">    displayInvalidFormatDetails: true,</div>
<div class="line">  }),</div>
<div class="line">});</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md3165"></a>
createMessageBuilder</h2>
<p>Creates zod-validation-error's default <span class="tt">MessageBuilder</span>, which is used to produce user-friendly error messages.</p>
<p>Meant to be passed as an option to fromError, fromZodIssue, fromZodError or toValidationError.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3166"></a>
Arguments</h3>
<ul>
<li><span class="tt">options</span> - <em>Object</em>; formatting options (optional)</li>
</ul>
<h4 class="doxsection"><a class="anchor" id="autotoc_md3167"></a>
createMessageBuilder Options</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name  </th><th class="markdownTableHeadCenter">Type  </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">maxIssuesInMessage</span>  </td><td class="markdownTableBodyCenter"><span class="tt">number</span>  </td><td class="markdownTableBodyNone">Max issues to include in user-friendly message (optional, defaults to <span class="tt">99</span>)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">issueSeparator</span>  </td><td class="markdownTableBodyCenter"><span class="tt">string</span>  </td><td class="markdownTableBodyNone">Used to concatenate issues in user-friendly message (optional, defaults to <span class="tt">";"</span>)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">unionSeparator</span>  </td><td class="markdownTableBodyCenter"><span class="tt">string</span>  </td><td class="markdownTableBodyNone">Used to concatenate union-issues in user-friendly message (optional, defaults to <span class="tt">" or "</span>)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">prefix</span>  </td><td class="markdownTableBodyCenter"><span class="tt">string \| undefined</span>  </td><td class="markdownTableBodyNone">Prefix to use in user-friendly message (optional, defaults to <span class="tt">"Validation error"</span>). Pass <span class="tt">undefined</span> to disable prefix completely.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">prefixSeparator</span>  </td><td class="markdownTableBodyCenter"><span class="tt">string</span>  </td><td class="markdownTableBodyNone">Used to concatenate prefix with rest of the user-friendly message (optional, defaults to <span class="tt">": "</span>). Not used when <span class="tt">prefix</span> is <span class="tt">undefined</span>.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">includePath</span>  </td><td class="markdownTableBodyCenter"><span class="tt">boolean</span>  </td><td class="markdownTableBodyNone">Indicates whether to include the erroneous property key in the error message (optional, defaults to <span class="tt">true</span>)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">forceTitleCase</span>  </td><td class="markdownTableBodyCenter"><span class="tt">boolean</span>  </td><td class="markdownTableBodyNone">Indicates whether to convert individual issue messages to title case (optional, defaults to <span class="tt">true</span>).  </td></tr>
</table>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3168"></a>
Example</h3>
<div class="fragment"><div class="line">import { createMessageBuilder } from &#39;zod-validation-error&#39;;</div>
<div class="line"> </div>
<div class="line">const messageBuilder = createMessageBuilder({</div>
<div class="line">  maxIssuesInMessage: 3,</div>
<div class="line">  includePath: false,</div>
<div class="line">});</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md3169"></a>
isValidationError</h2>
<p>A <a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates">type guard</a> utility function, based on <span class="tt">instanceof</span> comparison.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3170"></a>
Arguments</h3>
<ul>
<li><span class="tt">error</span> - error instance (required)</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3171"></a>
Example</h3>
<div class="fragment"><div class="line">import { z as zod } from &#39;zod&#39;;</div>
<div class="line">import { ValidationError, isValidationError } from &#39;zod-validation-error&#39;;</div>
<div class="line"> </div>
<div class="line">const err = new ValidationError(&#39;foobar&#39;);</div>
<div class="line">isValidationError(err); // returns true</div>
<div class="line"> </div>
<div class="line">const invalidErr = new Error(&#39;foobar&#39;);</div>
<div class="line">isValidationError(err); // returns false</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md3172"></a>
isValidationErrorLike</h2>
<p>A <a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates">type guard</a> utility function, based on <em>heuristics</em> comparison.</p>
<p><em>Why do we need heuristics since we can use a simple <span class="tt">instanceof</span> comparison?</em> Because of multi-version inconsistencies. For instance, it's possible that a dependency is using an older <span class="tt">zod-validation-error</span> version internally. In such case, the <span class="tt">instanceof</span> comparison will yield invalid results because module deduplication does not apply at npm/yarn level and the prototype is different.</p>
<p>tl;dr if you are uncertain then it is preferable to use <span class="tt">isValidationErrorLike</span> instead of <span class="tt">isValidationError</span>.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3173"></a>
Arguments</h3>
<ul>
<li><span class="tt">error</span> - error instance (required)</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3174"></a>
Example</h3>
<div class="fragment"><div class="line">import { ValidationError, isValidationErrorLike } from &#39;zod-validation-error&#39;;</div>
<div class="line"> </div>
<div class="line">const err = new ValidationError(&#39;foobar&#39;);</div>
<div class="line">isValidationErrorLike(err); // returns true</div>
<div class="line"> </div>
<div class="line">const invalidErr = new Error(&#39;foobar&#39;);</div>
<div class="line">isValidationErrorLike(err); // returns false</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md3175"></a>
isZodErrorLike</h2>
<p>A <a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates">type guard</a> utility function, based on <em>heuristics</em> comparison.</p>
<p><em>Why do we need heuristics since we can use a simple <span class="tt">instanceof</span> comparison?</em> Because of multi-version inconsistencies. For instance, it's possible that a dependency is using an older <span class="tt">zod</span> version internally. In such case, the <span class="tt">instanceof</span> comparison will yield invalid results because module deduplication does not apply at npm/yarn level and the prototype is different.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3176"></a>
Arguments</h3>
<ul>
<li><span class="tt">error</span> - error instance (required)</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3177"></a>
Example</h3>
<div class="fragment"><div class="line">import { z as zod } from &#39;zod&#39;;</div>
<div class="line">import { ValidationError, isZodErrorLike } from &#39;zod-validation-error&#39;;</div>
<div class="line"> </div>
<div class="line">const zodValidationErr = new ValidationError(&#39;foobar&#39;);</div>
<div class="line">isZodErrorLike(zodValidationErr); // returns false</div>
<div class="line"> </div>
<div class="line">const genericErr = new Error(&#39;foobar&#39;);</div>
<div class="line">isZodErrorLike(genericErr); // returns false</div>
<div class="line"> </div>
<div class="line">const zodErr = new zod.ZodError([</div>
<div class="line">  {</div>
<div class="line">    origin: &#39;number&#39;,</div>
<div class="line">    code: &#39;too_small&#39;,</div>
<div class="line">    minimum: 0,</div>
<div class="line">    inclusive: false,</div>
<div class="line">    path: [&#39;id&#39;],</div>
<div class="line">    message: &#39;Number must be greater than 0 at &quot;id&quot;&#39;,</div>
<div class="line">    input: -1,</div>
<div class="line">  },</div>
<div class="line">]);</div>
<div class="line">isZodErrorLike(zodErr); // returns true</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md3178"></a>
fromError</h2>
<p>Converts an error to <span class="tt">ValidationError</span>.</p>
<p><em>What is the difference between <span class="tt">fromError</span> and <span class="tt">fromZodError</span>?</em> The <span class="tt">fromError</span> function is a less strict version of <span class="tt">fromZodError</span>. It can accept an unknown error and attempt to convert it to a <span class="tt">ValidationError</span>.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3179"></a>
Arguments</h3>
<ul>
<li><span class="tt">error</span> - <em>unknown</em>; an error (required)</li>
<li><span class="tt">options</span> - <em>Object</em>; formatting options (optional)<ul>
<li><span class="tt">messageBuilder</span> - <em>MessageBuilder</em>; a function that accepts an array of <span class="tt">zod.ZodIssue</span> objects and returns a user-friendly error message in the form of a <span class="tt">string</span> (optional).</li>
</ul>
</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3180"></a>
Notes</h3>
<p>Alternatively, you may pass createMessageBuilder options directly as <span class="tt">options</span>. These will be used as arguments to create the <span class="tt">MessageBuilder</span> instance internally.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md3181"></a>
fromZodIssue</h2>
<p>Converts a single zod issue to <span class="tt">ValidationError</span>.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3182"></a>
Arguments</h3>
<ul>
<li><span class="tt">zodIssue</span> - <em>zod.ZodIssue</em>; a ZodIssue instance (required)</li>
<li><span class="tt">options</span> - <em>Object</em>; formatting options (optional)<ul>
<li><span class="tt">messageBuilder</span> - <em>MessageBuilder</em>; a function that accepts an array of <span class="tt">zod.ZodIssue</span> objects and returns a user-friendly error message in the form of a <span class="tt">string</span> (optional).</li>
</ul>
</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3183"></a>
Notes</h3>
<p>Alternatively, you may pass createMessageBuilder options directly as <span class="tt">options</span>. These will be used as arguments to create the <span class="tt">MessageBuilder</span> instance internally.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md3184"></a>
fromZodError</h2>
<p>Converts zod error to <span class="tt">ValidationError</span>.</p>
<p><em>Why is the difference between <span class="tt">ZodError</span> and <span class="tt">ZodIssue</span>?</em> A <span class="tt">ZodError</span> is a collection of 1 or more <span class="tt">ZodIssue</span> instances. It's what you get when you call <span class="tt">zodSchema.parse()</span>.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3185"></a>
Arguments</h3>
<ul>
<li><span class="tt">zodError</span> - <em>zod.ZodError</em>; a ZodError instance (required)</li>
<li><span class="tt">options</span> - <em>Object</em>; formatting options (optional)<ul>
<li><span class="tt">messageBuilder</span> - <em>MessageBuilder</em>; a function that accepts an array of <span class="tt">zod.ZodIssue</span> objects and returns a user-friendly error message in the form of a <span class="tt">string</span> (optional).</li>
</ul>
</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3186"></a>
Notes</h3>
<p>Alternatively, you may pass createMessageBuilder options directly as <span class="tt">options</span>. These will be used as arguments to create the <span class="tt">MessageBuilder</span> instance internally.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md3187"></a>
toValidationError</h2>
<p>A curried version of <span class="tt">fromZodError</span> meant to be used for FP (Functional Programming). Note it first takes the options object if needed and returns a function that converts the <span class="tt">zodError</span> to a <span class="tt">ValidationError</span> object</p>
<div class="fragment"><div class="line">toValidationError(options) =&gt; (zodError) =&gt; ValidationError</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md3188"></a>
Example using fp-ts</h3>
<div class="fragment"><div class="line">import * as Either from &#39;fp-ts/Either&#39;;</div>
<div class="line">import { z as zod } from &#39;zod&#39;;</div>
<div class="line">import { toValidationError, ValidationError } from &#39;zod-validation-error&#39;;</div>
<div class="line"> </div>
<div class="line">// create zod schema</div>
<div class="line">const zodSchema = zod</div>
<div class="line">  .object({</div>
<div class="line">    id: zod.int().positive(),</div>
<div class="line">    email: zod.email(),</div>
<div class="line">  })</div>
<div class="line">  .brand&lt;&#39;User&#39;&gt;();</div>
<div class="line"> </div>
<div class="line">export type User = zod.infer&lt;typeof zodSchema&gt;;</div>
<div class="line"> </div>
<div class="line">export function parse(</div>
<div class="line">  value: zod.input&lt;typeof zodSchema&gt;</div>
<div class="line">): Either.Either&lt;ValidationError, User&gt; {</div>
<div class="line">  return Either.tryCatch(() =&gt; schema.parse(value), toValidationError());</div>
<div class="line">}</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md3189"></a>
FAQ</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md3190"></a>
What is the difference between zod-validation-error and zod's own <a href="https://zod.dev/error-formatting#zprettifyerror">prettifyError</a>?</h2>
<p>While both libraries aim to provide a human-readable string representation of a zod error, they differ in several ways...</p>
<ol type="1">
<li><b>End-user focus</b>: zod-validation-error provides opinionated, user-friendly error messages designed to be displayed directly to end-users in forms or API responses.</li>
</ol>
<ol type="1">
<li><b>Customization options</b>: zod-validation-error offers extensive configuration for message formatting, such as controlling path inclusion, allowed values display, localization, and more.</li>
</ol>
<ol type="1">
<li><b>Error handling</b>: zod-validation-error maintains the original error details while providing a clean, consistent interface through the ValidationError class.</li>
</ol>
<ol type="1">
<li><b>Integration flexibility</b>: Beyond just formatting, zod-validation-error provides utility functions for error detection and conversion that work well in various architectural patterns, e.g. functional programming.</li>
</ol>
<p>Disclaimer: as per this <a href="https://github.com/causaly/zod-validation-error/issues/455#issuecomment-2811895152">comment</a>, we have no intention to antagonize zod. In fact, we are happy to decommission this module assuming it's in the best interest of the community. As of now, it seems that there's room for both <span class="tt">zod-validation-error</span> and <span class="tt">prettifyError</span>, also based on Colin McDonnell's <a href="https://github.com/causaly/zod-validation-error/issues/455#issuecomment-2814466019">response</a>.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md3191"></a>
Do I need to use <span class="tt">zod-validation-error</span>'s error map?</h2>
<p>No, you can use zod's native error map if you prefer. However, we recommend using <span class="tt">zod-validation-error</span>'s error map for better user-friendly messages.</p>
<p>You may also use your own custom error map if you have specific requirements, e.g. internationalization.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md3192"></a>
Where can I see how <span class="tt">zod-validation-error</span>'s error map formatting works?</h2>
<p>The easiest way to understand how <span class="tt">zod-validation-error</span>'s error map works is to look at the <a href="./lib/v4/errorMap/errorMap.test.ts">tests</a>. They cover various scenarios and demonstrate how the error map formats issues into user-friendly messages.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md3193"></a>
How to distinguish between errors</h2>
<p>Use the <span class="tt">isValidationErrorLike</span> type guard.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3194"></a>
Example</h3>
<p>Scenario: Distinguish between <span class="tt">ValidationError</span> VS generic <span class="tt">Error</span> in order to respond with 400 VS 500 HTTP status code respectively.</p>
<div class="fragment"><div class="line">import { isValidationErrorLike } from &#39;zod-validation-error&#39;;</div>
<div class="line"> </div>
<div class="line">try {</div>
<div class="line">  func(); // throws Error - or - ValidationError</div>
<div class="line">} catch (err) {</div>
<div class="line">  if (isValidationErrorLike(err)) {</div>
<div class="line">    return 400; // Bad Data (this is a client error)</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  return 500; // Server Error</div>
<div class="line">}</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md3195"></a>
How to use <span class="tt">ValidationError</span> outside <span class="tt">zod</span></h2>
<p>It's possible to implement custom validation logic outside <span class="tt">zod</span> and throw a <span class="tt">ValidationError</span>.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3196"></a>
Example 1: passing custom message</h3>
<div class="fragment"><div class="line">import { ValidationError } from &#39;zod-validation-error&#39;;</div>
<div class="line">import { Buffer } from &#39;node:buffer&#39;;</div>
<div class="line"> </div>
<div class="line">function parseBuffer(buf: unknown): Buffer {</div>
<div class="line">  if (!Buffer.isBuffer(buf)) {</div>
<div class="line">    throw new ValidationError(&#39;Invalid argument; expected buffer&#39;);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  return buf;</div>
<div class="line">}</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md3197"></a>
Example 2: passing custom message and original error as cause</h3>
<div class="fragment"><div class="line">import { ValidationError } from &#39;zod-validation-error&#39;;</div>
<div class="line"> </div>
<div class="line">try {</div>
<div class="line">  // do something that throws an error</div>
<div class="line">} catch (err) {</div>
<div class="line">  throw new ValidationError(&#39;Something went deeply wrong&#39;, { cause: err });</div>
<div class="line">}</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md3198"></a>
How to use <span class="tt">ValidationError</span> with custom "error map"</h2>
<p>Zod supports customizing error messages by providing a custom "error map". You may combine this with <span class="tt">zod-validation-error</span> to produce user-friendly messages.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3199"></a>
Example: produce user-friendly error messages using the <span class="tt">customError</span> property</h3>
<p>If all you need is to produce user-friendly error messages you may use the <span class="tt">customError</span> property.</p>
<div class="fragment"><div class="line">import { z as zod } from &#39;zod&#39;;</div>
<div class="line">import { createErrorMap } from &#39;zod-validation-error&#39;;</div>
<div class="line"> </div>
<div class="line">zod.config({</div>
<div class="line">  customError: createErrorMap({</div>
<div class="line">    includePath: true,</div>
<div class="line">  }),</div>
<div class="line">});</div>
</div><!-- fragment --><p><span class="tt">zod-validation-error</span> will respect the <span class="tt">customError</span> property when it is set, no further configuration is needed.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md3200"></a>
Does <span class="tt">zod-validation-error</span> support CommonJS</h2>
<p>Yes, <span class="tt">zod-validation-error</span> supports CommonJS out-of-the-box. All you need to do is import it using <span class="tt">require</span>.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3201"></a>
Example</h3>
<div class="fragment"><div class="line">const { ValidationError } = require(&#39;zod-validation-error&#39;);</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md3202"></a>
Contribute</h1>
<p>Source code contributions are most welcome. Please open a PR, ensure the linter is satisfied and all tests pass.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md3203"></a>
We are hiring</h3>
<p>Causaly is building the world's largest biomedical knowledge platform, using technologies such as TypeScript, React and Node.js. Find out more about our openings at <a href="https://jobs.ashbyhq.com/causaly">https://jobs.ashbyhq.com/causaly</a>.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md3204"></a>
License</h1>
<p>MIT </p>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_ca0386ec887ae6362f93b0d653b52e0c.html">frontend</a></li><li class="navelem"><a href="dir_8be25e30241834509be35899d7f7509b.html">node_modules</a></li><li class="navelem"><a href="dir_7c23b38b092287efdd07467f9383a383.html">zod-validation-error</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
