\doxysection{Kqueue\+Backend.\+hh}
\hypertarget{_kqueue_backend_8hh_source}{}\label{_kqueue_backend_8hh_source}\index{frontend/node\_modules/"@parcel/watcher/src/kqueue/KqueueBackend.hh@{frontend/node\_modules/"@parcel/watcher/src/kqueue/KqueueBackend.hh}}
\mbox{\hyperlink{_kqueue_backend_8hh}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ KQUEUE\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ KQUEUE\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <unordered\_map>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <sys/event.h>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_brute_force_backend_8hh}{../shared/BruteForceBackend.hh}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_dir_tree_8hh}{../DirTree.hh}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_signal_8hh}{../Signal.hh}}"{}}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_kqueue_subscription}{KqueueSubscription}}\ \{}
\DoxyCodeLine{00011\ \ \ \mbox{\hyperlink{_watcher_8hh_a8a32f1740da49095a86d32383c012cc9}{WatcherRef}}\ \mbox{\hyperlink{struct_kqueue_subscription_a4137c5a8adebb295a7b2c5c2299c26a7}{watcher}};}
\DoxyCodeLine{00012\ \ \ std::string\ \mbox{\hyperlink{struct_kqueue_subscription_a46d8e7b8951e0f2a5163c8908d2d393a}{path}};}
\DoxyCodeLine{00013\ \ \ std::shared\_ptr<DirTree>\ \mbox{\hyperlink{struct_kqueue_subscription_a809da86ca0e2f2a0d7cfb7e22c72af7d}{tree}};}
\DoxyCodeLine{00014\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_kqueue_subscription_a40330a981311501a059512bfd6f5e34c}{fd}};}
\DoxyCodeLine{00015\ \};}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_kqueue_backend}{KqueueBackend}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_brute_force_backend}{BruteForceBackend}}\ \{}
\DoxyCodeLine{00018\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00019\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_kqueue_backend_aaed892022a0ef9b0f7cb0eef4a49e629}{start}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00020\ \ \ \mbox{\hyperlink{class_kqueue_backend_a9dd9c4c6ecf4a53d48fd3644a99d9f13}{\string~KqueueBackend}}();}
\DoxyCodeLine{00021\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_kqueue_backend_acb1c35755419d55a7751c404400faa08}{subscribe}}(\mbox{\hyperlink{_watcher_8hh_a8a32f1740da49095a86d32383c012cc9}{WatcherRef}}\ watcher)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00022\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_kqueue_backend_ae55749d76ef6069bebbdee94d08e9d39}{unsubscribe}}(\mbox{\hyperlink{_watcher_8hh_a8a32f1740da49095a86d32383c012cc9}{WatcherRef}}\ watcher)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00023\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00024\ \ \ \textcolor{keywordtype}{int}\ mKqueue;}
\DoxyCodeLine{00025\ \ \ \textcolor{keywordtype}{int}\ mPipe[2];}
\DoxyCodeLine{00026\ \ \ std::unordered\_multimap<std::string,\ KqueueSubscription>\ mSubscriptions;}
\DoxyCodeLine{00027\ \ \ std::unordered\_map<int,\ DirEntry\ *>\ mFdToEntry;}
\DoxyCodeLine{00028\ \ \ \mbox{\hyperlink{class_signal}{Signal}}\ mEndedSignal;}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \textcolor{keywordtype}{bool}\ watchDir(\mbox{\hyperlink{_watcher_8hh_a8a32f1740da49095a86d32383c012cc9}{WatcherRef}}\ watcher,\ std::string\ path,\ std::shared\_ptr<DirTree>\ tree);}
\DoxyCodeLine{00031\ \ \ \textcolor{keywordtype}{bool}\ compareDir(\textcolor{keywordtype}{int}\ fd,\ std::string\ \&dir,\ std::unordered\_set<WatcherRef>\ \&watchers);}
\DoxyCodeLine{00032\ \ \ std::vector<KqueueSubscription\ *>\ findSubscriptions(std::string\ \&path);}
\DoxyCodeLine{00033\ \};}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
