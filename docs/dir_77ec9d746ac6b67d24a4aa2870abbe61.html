<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Shop ProjectMy Project: frontend/node_modules/node-addon-api/tools Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Shop ProjectMy Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dir_77ec9d746ac6b67d24a4aa2870abbe61.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">tools Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Directory dependency graph for tools:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="dir_77ec9d746ac6b67d24a4aa2870abbe61_dep.svg" width="142" height="106"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<h1 class="doxsection"><a class="anchor" id="autotoc_md2194"></a>
Tools</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md2195"></a>
clang-format</h1>
<p>The clang-format checking tools is designed to check changed lines of code compared to given git-refs.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md2196"></a>
Migration Script</h1>
<p>The migration tool is designed to reduce repetitive work in the migration process. However, the script is not aiming to convert every thing for you. There are usually some small fixes and major reconstruction required.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md2197"></a>
How To Use</h2>
<p>To run the conversion script, first make sure you have the latest <span class="tt">node-addon-api</span> in your <span class="tt">node_modules</span> directory. </p><div class="fragment"><div class="line">npm install node-addon-api</div>
</div><!-- fragment --><p>Then run the script passing your project directory </p><div class="fragment"><div class="line">node ./node_modules/node-addon-api/tools/conversion.js ./</div>
</div><!-- fragment --><p>After finish, recompile and debug things that are missed by the script.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md2198"></a>
Quick Fixes</h2>
<p>Here is the list of things that can be fixed easily.</p><ol type="1">
<li>Change your methods' return value to void if it doesn't return value to JavaScript.</li>
<li>Use <span class="tt">.</span> to access attribute or to invoke member function in <a class="el" href="class_napi_1_1_object.html" title="A JavaScript object value.">Napi::Object</a> instead of <span class="tt">-&gt;</span>.</li>
<li><span class="tt">Napi::New(env, value);</span> to `Napi::[Type]::New(env, value);</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="autotoc_md2199"></a>
Major Reconstructions</h2>
<p>The implementation of <span class="tt"><a class="el" href="class_napi_1_1_object_wrap.html">Napi::ObjectWrap</a></span> is significantly different from NAN's. <span class="tt"><a class="el" href="class_napi_1_1_object_wrap.html">Napi::ObjectWrap</a></span> takes a pointer to the wrapped object and creates a reference to the wrapped object inside ObjectWrap constructor. <span class="tt"><a class="el" href="class_napi_1_1_object_wrap.html">Napi::ObjectWrap</a></span> also associates wrapped object's instance methods to Javascript module instead of static methods like NAN.</p>
<p>So if you use Nan::ObjectWrap in your module, you will need to execute the following steps.</p>
<ol type="1">
<li>Convert your [ClassName]::New function to a constructor function that takes a <span class="tt"><a class="el" href="class_napi_1_1_callback_info.html">Napi::CallbackInfo</a></span>. Declare it as <div class="fragment"><div class="line">[ClassName](const Napi::CallbackInfo&amp; info);</div>
</div><!-- fragment --> and define it as <div class="fragment"><div class="line">[ClassName]::[ClassName](const Napi::CallbackInfo&amp; info) : Napi::ObjectWrap&lt;[ClassName]&gt;(info){</div>
<div class="line">  ...</div>
<div class="line">}</div>
</div><!-- fragment --> This way, the <span class="tt"><a class="el" href="class_napi_1_1_object_wrap.html">Napi::ObjectWrap</a></span> constructor will be invoked after the object has been instantiated and <span class="tt"><a class="el" href="class_napi_1_1_object_wrap.html">Napi::ObjectWrap</a></span> can use the <span class="tt">this</span> pointer to create a reference to the wrapped object.</li>
<li>Move your original constructor code into the new constructor. Delete your original constructor.</li>
<li>In your class initialization function, associate native methods in the following way. <div class="fragment"><div class="line">Napi::FunctionReference constructor;</div>
<div class="line"> </div>
<div class="line">void [ClassName]::Init(Napi::Env env, Napi::Object exports, Napi::Object module) {</div>
<div class="line">  Napi::HandleScope scope(env);</div>
<div class="line">  Napi::Function ctor = DefineClass(env, &quot;Canvas&quot;, {</div>
<div class="line">    InstanceMethod&lt;&amp;[ClassName]::Func1&gt;(&quot;Func1&quot;),</div>
<div class="line">    InstanceMethod&lt;&amp;[ClassName]::Func2&gt;(&quot;Func2&quot;),</div>
<div class="line">    InstanceAccessor&lt;&amp;[ClassName]::ValueGetter&gt;(&quot;Value&quot;),</div>
<div class="line">    StaticMethod&lt;&amp;[ClassName]::StaticMethod&gt;(&quot;MethodName&quot;),</div>
<div class="line">    InstanceValue(&quot;Value&quot;, Napi::[Type]::New(env, value)),</div>
<div class="line">  });</div>
<div class="line"> </div>
<div class="line">  constructor = Napi::Persistent(ctor);</div>
<div class="line">  constructor .SuppressDestruct();</div>
<div class="line">  exports.Set(&quot;[ClassName]&quot;, ctor);</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>In function where you need to Unwrap the ObjectWrap in NAN like <span class="tt">[ClassName]* native = Nan::ObjectWrap::Unwrap&lt;[ClassName]&gt;(info.This());</span>, use <span class="tt">this</span> pointer directly as the unwrapped object as each ObjectWrap instance is associated with a unique object instance.</li>
</ol>
<p>If you still find issues after following this guide, please leave us an issue describing your problem and we will try to resolve it. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_ca0386ec887ae6362f93b0d653b52e0c.html">frontend</a></li><li class="navelem"><a href="dir_8be25e30241834509be35899d7f7509b.html">node_modules</a></li><li class="navelem"><a href="dir_ac3db151aa67cee6b500d2802d0fb74d.html">node-addon-api</a></li><li class="navelem"><a href="dir_77ec9d746ac6b67d24a4aa2870abbe61.html">tools</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
